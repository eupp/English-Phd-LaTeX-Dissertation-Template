\newcommand{\PomAddEventRule}{{(Add Event)}\xspace}
\newcommand{\PorfAddEventRule}{{(ES Step)}\xspace}
% \newcommand{\ESStoreRule}{{(Store)}\xspace}
% \newcommand{\ESLoadRule}{{(Load)}\xspace}
% \newcommand{\ESLoadBotRule}{{(Load-Bottom)}\xspace}

\begin{figure*}[t]
\begin{center}

  \AXC{$e \not\in E$}
  \AXC{$\eset \subseteq E$}
  %
  \RightLabel{\PomAddEventRule}
  \BIC{$\tup{E, \lab, \ca}
        \pomStep{\tup{e, \ell, \eset}}
        \tup{E \uplus \set{e}, \updmap{\lab}{e}{\ell}, \ca \uplus \dwset{\eset} \times \set{e}}$}
  \DisplayProof

  \rulevspace

  \AXC{$\ltr{\el}{\state}{\state'}$}
  \noLine
  \UIC{$\lSTEP(\ell) = \step{\el}{\state}{\state'}$}
  %
  \AXC{$p \pomStep{\tup{e, \ell, \set{e_{\lPO}, e_{\lRF}}}} p'$}
  %
  \AXC{$\stlab(e_{\lPO}) \posync \lSTEP(\ell)$}
  \noLine
  \UIC{$\dlab(e_{\lRF}) \rfsync \lLAB(\ell)$}
  %
  \RightLabel{\PorfAddEventRule}
  \TIC{$p \esStep{\tup{e, \ell, e_{\lPO}, e_{\lRF}}} p'$}
  \DisplayProof

  \rulevspace

  %% \AXC{$p \pomStep{\tup{e, \ell, \set{e} \setminus \set{e'}}} p'$}
  %% \AXC{$\ell' \ssync \ell$}
  %% \AXC{$(\ell \neq \ell' = \lab(e') \wedge e' \in E) \vee 
  %%       (\ell = \ell' \wedge e = e')$}
  %% \RightLabel{\RfAddEventRule}
  %% \TIC{$p \rfStep{\tup{e, \ell, e'}} p'$}
  %% \DisplayProof

  %% \rulevspace

  %% \AXC{$p_{\lPO} \poStep{\tup{e, \ell, e_\lPO}} p'_{\lPO}$}
  %% \AXC{$p_{\lRF} \rfStep{\tup{e, \ell, e_\lRF}} p'_{\lRF}$}
  %% \AXC{$ \upset{e_{\lPO}} \cap \dwset{e_{\lRF}} \subseteq \emptyset $}
  %% \RightLabel{\PorfAddEventRule}
  %% \TIC{$\tup{p_{\lPO}, p_{\lRF}} \porfStep{\tup{e, \ell, e'}} \tup{p'_{\lPO}, p'_{\lRF}}$}
  %% \DisplayProof
  
  % \AXC{$e = \fresh(\first(\eventSeq))$}
  % \AXC{$e_{\lPO} \in \eventSeq$}
  % \AXC{$e_{\lRF} \in \eventSeq$}
  % \RightLabel{\ESAddEventRule}
  % \TIC{$\tup{\eventSeq, \lLAB, \lfPO, \lfRF}
  %       \esstep{\tup{e, \ell, e_{\lPO}, e_{\lRF}}}
  %       \tup{e :: \eventSeq, \updmap{\lLAB}{e}{\ell}, \updmap{\lfPO}{e}{e_{\lPO}}, \updmap{\lfRF}{e}{e_{\lRF}}}$}
  % \DisplayProof

  % \rulevspace

  % \AXC{$e \in S.\eventSeq$}
  % \AXC{$\thrdst = \appmap{\thrdmap}{e}$}
  % \AXC{$P \vdash \thrdst \thrdstep{\eps} \thrdst'$}
  % \RightLabel{\ESIdleRule}
  % \TIC{$P \vdash \tup{S, \thrdmap} \fullstep{\eps} \tup{S, \updmap{\thrdmap}{e}{\thrdst'}}$}
  % \DisplayProof

  % \rulevspace

  % \AXC{$\thrdst = \appmap{\thrdmap}{e_{\lPO}}$}
  % \AXC{$P \vdash \thrdst \thrdstep{\ell} \thrdst'$}
  % \AXC{$S \esstep{\tup{e, \ell, e_{\lPO}, \bot}} S'$}
  % \AXC{$l = \wlab{x}{v}$}
  % \RightLabel{\ESStoreRule}
  % \QIC{$P \vdash \tup{S, \thrdmap} \fullstep{\tup{e, \ell, e_{\lPO}, \bot}} \tup{S', \updmap{\thrdmap}{e}{\thrdst'}}$}
  % \DisplayProof

  % \rulevspace

  % \AXC{$\thrdst = \appmap{\thrdmap}{e_{\lPO}}$}
  % \AXC{$P \vdash \thrdst \thrdstep{\ell} \thrdst'$}
  % \AXC{$S \esstep{\tup{e, \ell, e_{\lPO}, e_{\lRF}}} S'$}
  % \AXC{$\neg (e \cfRel e_{\lRF})$}
  % \AXC{$l = \rlab{x}{v}$}
  % \noLine
  % \UIC{$\appmap{\lLAB}{e_{\lRF}} = \wlab{x}{v}$}
  % \RightLabel{\ESLoadRule}
  % \QuinaryInfC{$P \vdash \tup{S, \thrdmap} \fullstep{\tup{e, \ell, e_{\lPO}, e_{\lRF}}} \tup{S', \updmap{\thrdmap}{e}{\thrdst'}}$}
  % \DisplayProof

  % \rulevspace

  % \AXC{$\thrdst = \appmap{\thrdmap}{e_{\lPO}}$}
  % \AXC{$P \vdash \thrdst \thrdstep{\ell} \thrdst'$}
  % \AXC{$S \esstep{\tup{e, \ell, e_{\lPO}, \bot}} S'$}
  % \AXC{$l = \rlab{x}{\bot}$}
  % \RightLabel{\ESLoadBotRule}
  % \QIC{$P \vdash \tup{S, \thrdmap} \fullstep{\tup{e, \ell, e_{\lPO}, \bot}} \tup{S', \updmap{\thrdmap}{e}{\thrdst'}}$}
  % \DisplayProof
  
  \caption{Operational Semantics}
  \label{fig:eventstruct-opsem}

\end{center}
\end{figure*}
