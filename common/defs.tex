%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Misc. Math  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% set notation
\newcommand{\set}[1]{\{#1\}}

% sequence notation
\newcommand{\seq}[1]{[{#1}]}

% tuple with angle brackets
\newcommand{\tup}[1]{\langle #1 \rangle}

% first and second components of a pair
\newcommand{\fst}[1]{\mathit{fst}(#1)}
\newcommand{\snd}[1]{\mathit{snd}(#1)}

% semantics brackets
\newcommand{\sem}[1]{\llbracket #1 \rrbracket}

% equality by definition
\newcommand{\defeq}{\triangleq}

% function arrow
\newcommand{\fun}{\rightarrow}

% partial function arrow
\newcommand{\pfun}{\rightharpoonup}

% shorter subset notation
\newcommand{\suq}{\subseteq}

% homomorphism arrow (TODO: change notations)
\newcommand{\homf}[1][{}]{\underset{#1}{\leadsto}}

% isomorphism 
\newcommand{\isof}[1][{}]{\underset{#1}\sim}

% power set
\newcommand{\pwset}[1]{\mathcal{P}(#1)}

% prefix 
\newcommand{\dwset}[1]{\lceil #1 \rceil}

% function-to-relation
\newcommand{\frel}[1]{#1^\uparrow}

% epsilon/empty 
\newcommand{\eps}{\epsilon}

% missing greek letters
\newcommand{\Tau}{\mathrm{T}}
\newcommand{\Ell}{\mathcal{L}}

% undefined (for partial functions)
%% \newcommand{\undef}{\bot}

% sequential composition (of relations)
\newcommand{\seqc}{\;}

% some math sets
\newcommand{\N}{{\mathbb{N}}}
\newcommand{\Z}{{\mathbb{Z}}}
\newcommand{\Q}{{\mathbb{Q}}}

% domain/codomain notation
\newcommand{\dom}[1]{\textit{dom}{({#1})}}
\newcommand{\cod}[1]{\textit{codom}{({#1})}}

% restriction
\newcommand{\rst}[1]{|_{#1}}

% length
\newcommand{\len}[1]{\mathsf{len}({#1})}

% cardinality
\newcommand{\card}[1]{|{#1}|}

%\newcommand{\implies}{{\Rightarrow}}
\renewcommand{\iff}{{\Leftrightarrow}}

% finite subset
% \newcommand{\finsubseteq}{\underset{fin}{\subseteq}}
\newcommand{\finsubseteq}{{\subseteq}_{fin}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Pomsets and Event Struct. Defs %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\lab}{\lambda}
\newcommand{\ca}{\leqslant}
\newcommand{\sca}{<}
\newcommand{\ica}{\lessdot}
\newcommand{\cf}{\#}
\newcommand{\icf}{\sim_{\#}}

% set of all pomsets (generated by an alphabet)
\newcommand{\Pom}[1][{}]{%
  \textsc{Pom}\ifthenelse{\isempty{#1}}{}{(#1)}\xspace%
}

% set of all threaded pomsets (generated by an alphabet)
\newcommand{\ThrdPom}[1][{}]{%
  \textsc{ThrdPom}\ifthenelse{\isempty{#1}}{}{(#1)}\xspace%
}

% pomset language (generated by an alphabet)
\newcommand{\Pomlang}[1][{}]{%
  \textsc{Pomlang}\ifthenelse{\isempty{#1}}{}{(#1)}\xspace%
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Weak Memory Defs  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\Tid}{\mathsf{Tid}}
\newcommand{\Loc}{\mathsf{Loc}}
\newcommand{\Val}{\mathsf{Val}}
\newcommand{\Lab}{\mathsf{Lab}}
\newcommand{\Mod}{\mathsf{Mod}}

\newcommand{\isex}{{\mathtt{ex}}}
\newcommand{\isnotex}{{\operatorname{\mathtt{not-ex}}}}

\newcommand{\wlab}[3]{{\lW}^{#1}({#2},{#3})}
\newcommand{\rlab}[3]{{\lR}^{#1}({#2},{#3})}
\newcommand{\flab}[1]{{\lF}^{#1}}
\newcommand{\ulab}[4]{{\lU}^{#1}({#2},{#3},{#4})}

\newcommand{\wlabn}[4]{{\color{colorXO}#1}:{\lW}^{#2}({#3},{#4})}
\newcommand{\rlabn}[4]{{\color{colorXO}#1}:{\lR}^{#2}({#3},{#4})}
\newcommand{\flabn}[2]{{\color{colorXO}#1}:{\lF}^{#2}}

\newcommand{\lE}{{\mathtt{E}}}
%% \newcommand{\lEi}{\set{e_0}}

\newcommand{\lR}{{\mathtt{R}}}
\newcommand{\lW}{{\mathtt{W}}}
\newcommand{\lF}{{\mathtt{F}}}
\newcommand{\lRex}{\lR_{\isex}}
\newcommand{\lWex}{\lW_{\isex}}

\newcommand{\lLAB}{{\mathtt{lab}}}
\newcommand{\lID}{{\mathtt{id}}}
\newcommand{\lTID}{{\mathtt{tid}}}
\newcommand{\lSN}{{\mathtt{sn}}}
\newcommand{\lTYP}{{\mathtt{typ}}}
\newcommand{\lLOC}{{\mathtt{loc}}}
\newcommand{\lMOD}{{\mathtt{mod}}}
\newcommand{\lVAL}{{\mathtt{val}}}
\newcommand{\lVALR}{{\mathtt{val_r}}}
\newcommand{\lVALW}{{\mathtt{val_w}}}

\newcommand{\lEQLAB}{=_{\lLAB}}
\newcommand{\lEQTID}{=_{\lTID}}
\newcommand{\lEQLOC}{=_{\lLOC}}
\newcommand{\lEQVAL}{=_{\lVAL}}

\colorlet{colorPO}{gray!60!black}
\colorlet{colorCF}{red!60!black}
\colorlet{colorECF}{red!60!black}
\colorlet{colorJF}{blue!60!black}
\colorlet{colorRF}{green!60!black}
\colorlet{colorEW}{brown}
\colorlet{colorMO}{orange}
\colorlet{colorFR}{purple}
\colorlet{colorECO}{orange!80!black}
\colorlet{colorSYN}{green!40!black}
\colorlet{colorHB}{blue}
\colorlet{colorPPO}{magenta}
\colorlet{colorRMW}{olive!70!black}
\colorlet{colorRS}{blue}
\colorlet{colorREL}{blue!70!black}
\colorlet{colorSC}{violet}
\colorlet{colorPSC}{violet}
\colorlet{colorWB}{orange!70!black}
\colorlet{colorSCB}{violet}
\colorlet{colorDETOUR}{teal}
\colorlet{colorDEPS}{violet}
\colorlet{colorFENCE}{olive}
\colorlet{colorCOV}{magenta!20}
\colorlet{colorISS}{blue!10!white}
\colorlet{colorVF}{purple!70!black}

\newcommand{\lPO}{{\color{colorPO}\mathtt{po}}}
\newcommand{\lPOimm}{{\color{colorPO}\mathtt{po_{imm}}}}
\newcommand{\lCF}{{\color{colorCF}\mathtt{cf}}}
\newcommand{\lCFimm}{{\color{colorCF}\mathtt{cf_{imm}}}}
\newcommand{\lECF}{{\color{colorECF}\mathtt{ecf}}}
\newcommand{\lJF}{{\color{colorJF} \mathtt{jf}}}
\newcommand{\lRF}{{\color{colorRF} \mathtt{rf}}}
\newcommand{\lPORF}{\lPO\lRF}
\newcommand{\lRMW}{{\color{colorRMW} \mathtt{rmw}}}
\newcommand{\lMO}{{\color{colorMO} \mathtt{mo}}}
\newcommand{\lEW}{{\color{colorEW} \mathtt{ew}}}
\newcommand{\lCO}{{\color{colorMO} \mathtt{co}}}
\newcommand{\lFR}{{\color{colorFR} \mathtt{fr}}}
\newcommand{\lECO}{{\color{colorECO} \mathtt{eco}}}
\newcommand{\lRS}{{\color{colorRS}\mathtt{rs}}}
\newcommand{\lREL}{{\color{colorREL}\mathtt{rel}}}
\newcommand{\lSW}{{\color{colorSYN}\mathtt{sw}}}
\newcommand{\lHB}{{\color{colorHB}\mathtt{hb}}}
\newcommand{\lBOB}{{\mathtt{bob}}}
\newcommand{\lSC}{{\color{colorSC}\mathtt{sc}}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Pomsets <-> Exec. Graphs  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% set of all execution graphs
\newcommand{\ExecG}{\mathcal{G}}
\newcommand{\PorfExecG}{\mathcal{G}_{\lPORF}}

% graph --> pomset
\newcommand{\gpom}{\mathbf{p}}

% pomset --> graph
\newcommand{\pomg}{\mathbf{G}}

% memory model --> pomset lang
\newcommand{\wmmlang}[1]{\mathbf{Pom}(#1)}

% labels for shared memory abstraction
\newcommand{\MemLab}{L_{\mathrm{m}}}
\newcommand{\TidMemLab}{L_{\mathrm{tm}}}

\newcommand{\lRFs}{{\color{colorRF}\mathtt{RF}}}
\newcommand{\ExecGs}[1]{\ExecG(#1)}

% set of all threaded pomsets (generated by an alphabet)
\newcommand{\PorfPom}[1][{}]{%
  \textsc{PorfPom}\ifthenelse{\isempty{#1}}{}{(#1)}\xspace%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Proper Names and Abbreviations  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% programming languages abbreviations

\newcommand{\Java}{Java\xspace}
\newcommand{\JVM}{JVM\xspace}
\newcommand{\CLANG}{C\xspace}
\newcommand{\CPP}{C/C++\xspace}
\newcommand{\JS}{JavaScript\xspace}
\newcommand{\LLVM}{LLVM\xspace}

%% memory models abbreviations

\newcommand{\MM}[1]{\ensuremath{\mathsf{#1}}\xspace}

\newcommand{\SC}{\MM{SC}}
\newcommand{\DRFx}{\MM{DRFx}}

\newcommand{\Intel}{\MM{x86}}
\newcommand{\TSO}{\MM{TSO}}
\newcommand{\SPARC}{\MM{SPARC}}
\newcommand{\ARM}{\MM{ARM}}
\newcommand{\ARMv}[1]{\MM{ARMv{#1}}}
\newcommand{\POWER}{\MM{POWER}}
\newcommand{\RISC}{\MM{RISC\text{-}V}}

\newcommand{\CMM}{\MM{C11}}
\newcommand{\RCMM}{\MM{RC11}}
\newcommand{\IMM}{\MM{IMM}}

\newcommand{\Prm}{\MM{Promising}}
\newcommand{\Wkm}{\MM{Weakestmo}}
\newcommand{\WkmS}{\MM{Weakestmo2}}
\newcommand{\MRD}{\MM{MRD}}
\newcommand{\PwP}{\MM{PwP}}

%% proof assistants 

\newcommand{\coq}{\textsc{Coq}\xspace}
\newcommand{\gallina}{\textsc{Gallina}\xspace}
\newcommand{\mathcomp}{\textsc{MathComp}\xspace}
\newcommand{\analysis}{\textsc{MathComp-Analysis}\xspace}
\newcommand{\finmap}{\textsc{finmap}\xspace}
\newcommand{\relationalgebra}{\textsc{relation-algebra}\xspace}
\newcommand{\ssreflect}{\textsc{SSReflect}\xspace}
\newcommand{\equations}{\textsc{Equations}\xspace}

\newcommand{\agda}{\textsc{Agda}\xspace}
\newcommand{\arend}{\textsc{Arend}\xspace}
\newcommand{\idris}{\textsc{Idris}\xspace}
\newcommand{\isabelle}{\textsc{Isabelle/HOL}\xspace}

%% tools 

\newcommand{\hmc}{\textsc{HMC}\xspace}
\newcommand{\hmclbf}{$\hmc_{\lbf}$\xspace}
\newcommand{\RCMC}{\textsc{RCMC}\xspace}
\newcommand{\rcmc}{\textsc{rcmc}\xspace}
\newcommand{\genmc}{\textsc{GenMC}\xspace}
\newcommand{\lockmc}{\textsc{LAPOR}\xspace}
\newcommand{\genmcmath}{\textnormal{\genmc}\xspace}
\newcommand{\Tracer}{\textsc{Tracer}\xspace}
\newcommand{\Herd}{\textsc{Herd}\xspace}
\newcommand{\PPCMEM}{\textsc{PPCMEM}\xspace}
\newcommand{\ARMMEM}{\textsc{ARMMEM}\xspace}
\newcommand{\CPPMEM}{\textsc{CPPMEM}\xspace}
\newcommand{\TriCheck}{\textsc{TriCheck}\xspace}
\newcommand{\rmem}{\textsc{rmem}\xspace}
\newcommand{\Nidhugg}{\textsc{Nidhugg}\xspace}
\newcommand{\CDSChecker}{\textsc{CDS\-Checker}\xspace}
\newcommand{\CBMC}{\textsc{CBMC}\xspace}
\newcommand{\Dartagnan}{\textsc{Dartagnan}\xspace}
\newcommand{\Verisoft}{\textsc{Verisoft}\xspace}
\newcommand{\CHESS}{\textsc{CHESS}\xspace}
\newcommand{\wmc}{\textsc{WMC}\xspace}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Tex Utils  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% abbrevations
\newcommand{\ie}{\textit{i.e.,}\xspace}
\newcommand{\eg}{\textit{e.g.,}\xspace}
\newcommand{\etc}{\textit{etc.}\xspace}
\newcommand{\sth}{\textit{s.t.}\xspace}
\newcommand{\etal}{\textit{et~al.}\xspace}
\newcommand{\wrt}{\textit{w.r.t.}\xspace}
\newcommand{\aka}{\textit{a.k.a.}\xspace}
\newcommand{\corr}{\textit{corr.}\xspace}

% definitions/lemmas/theorems etc
\newtheorem{lemma}{Лемма}
\newtheorem{theorem}{Теорема}
\newtheorem{proposition}{Утверждение}
\newtheorem{definition}{Определение}

%% for comments
\newcommand{\eupp}[1]{{\color{orange!70!black}\textbf{Evgenii: #1}}}

%% labels for axioms

\newcounter{mylabelcounter}

\makeatletter
\newcommand{\labelAxiom}[2]{%
\hfill{\normalfont\textsc{(#1)}}\refstepcounter{mylabelcounter}
\immediate\write\@auxout{
  \string\newlabel{#2}{{\unexpanded{\normalfont\textsc{#1}}}{\thepage}{{\unexpanded{\normalfont\textsc{#1}}}}{mylabelcounter.\number\value{mylabelcounter}}{}}
}
}
\makeatother
